var factory;myDirectives.directive("upload",["uploadManager",factory=function(n){return{restrict:"A",link:function(t,i){return $(i).fileupload({dataType:"text",add:function(t,i){return n.add(i)},progressall:function(t,i){var r;return r=parseInt(i.loaded/i.total*100,10),n.setProgress(r)},done:function(t,i){return n.setFileStatus(i)}})}}}]),myDirectives.directive("dynamicUpload",function(n){return function(t,i,r){var u;return u=function(r){return i.context.innerHTML="<input type='file' name='file' data-url='fileupload/upload/"+r+"' upload />",n(i.contents())(t)},t.$watch(r.dynamicUpload,function(){return u("1")})}}),angular.module("FileUpload",[]).factory("uploadManager",function(n){var t;return t=[],{add:function(i){return t.push(i),n.$broadcast("fileAdded",i.files[0])},cancel:function(n){for(var u,r,i=0,f=t.length;i<f;i++)r=t[i],r.files[0].name===n.name&&(u=r);return t.splice(t.indexOf(u),1)},clear:function(){return t=[]},files:function(){var n;return n=[],$.each(t,function(t,i){return n.push(i.files[0].name)}),n},upload:function(){return $.each(t,function(n,t){return t.submit()}),this.clear()},setProgress:function(t){return n.$broadcast("uploadProgress",t)},setFileStatus:function(t){return n.$broadcast("fileUploaded",t)}}})